{% load static %}
<!DOCTYPE html>
<html lang="en" class="dark-mode">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard</title>
    <link href="{% static 'css/dashboard.css' %}" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>
<body>
  <nav class="top-nav">
    <div class="container d-flex justify-content-between align-items-center py-2">
      <a href="{% url 'home' %}" class="logo">ktune</a>
      <ul class="nav-links d-none d-md-flex">
        <li><a href="{% url 'home' %}">Events</a></li>
        <li><a href="{% url 'home' %}">Messages</a></li>
        <li><a href="{% url 'home' %}">Notifications</a></li>
        <li><a href="{% url 'home' %}">Profile</a></li>
          <li><a href="{% url 'accounts:logout' %}">Logout</a></li>
        {% if user.is_authenticated %}
          <li><a href="{% url 'accounts:login' %}">Login</a></li>
        {% else %}
        <li><a href="{% url 'accounts:login' %}">Login</a></li>
        {% endif %}
      </ul>
      <button class="btn btn-purple d-md-none" id="mobileMenuBtn"><i class="fas fa-bars"></i></button>
    </div>
  </nav>

          <select id="categorySelect" name="category" class="form-select w-auto">
            <option value="">All</option>
            <option value="festival">Festival</option>
            <option value="music">Music</option>
            <option value="comedy">Comedy</option>
            <option value="show">Show</option>
          </select>
          <input type="search" name="q" class="form-control" placeholder="Search events..." />
          <button type="submit" class="btn btn-purple">Search</button>
        </form>

        <!-- Events List -->
        <section>
          <h3 class="text-light mb-3">Events</h3>
          <div class="events-list row g-3">
            {% for event in events %}
            <div class="col-12 col-md-6 col-lg-4 event-card p-3 rounded">
              <img src="{{ event.image.url }}" alt="{{ event.name }}" class="img-fluid rounded" />
              <h5 class="mt-2">{{ event.name }}</h5>
              <p class="text-muted">{{ event.date|date:"F j, Y" }}</p>
              <div class="categories mb-2">
                {% for cat in event.category.all %}
                <span class="badge bg-purple">{{ cat.name }}</span>
                {% endfor %}
        <form method="GET" class="d-flex mb-3 gap-2 align-items-center">
          <label for="categorySelect" class="text-light mb-0">Category:</label>
      <a href="{% url 'book_ticket' event.id %}" class="btn btn-purple btn-sm">Book</a>
                <div>
                  <button class="btn btn-sm btn-favorite"><i class="far fa-heart"></i></button>
                  <button class="btn btn-sm btn-share"><i class="fas fa-share-alt"></i></button>
                </div>
                    <button class="btn btn-sm btn-share"><i class="fas fa-share-alt"></i></button>
                  </div>
              </div>
            </div>
            {% empty %}
            <p class="text-light">No events found.</p>
            {% endfor %}
          </div>
        </section>

        <!-- Reels Section -->
        <section class="mt-5">
          <h3 class="text-light mb-3">Artist Reels</h3>
          <div class="reels-list d-flex overflow-auto gap-3">
            {% for reel in reels %}
            <div class="reel-card rounded">
              <video src="{{ reel.video.url }}" controls class="rounded"></video>
              <p class="text-light mt-1">{{ reel.artist.name }}</p>
            </div>
            {% empty %}
            <p class="text-light">No reels available.</p>
            {% endfor %}
          </div>
        </section>
      </main>
    </div>
  </div>

  <a href="{% url 'home' %}" class="text-purple text-center">
  <nav class="bottom-nav d-md-none fixed-bottom bg-dark d-flex justify-content-around align-items-center py-2">
    <a href="{% url 'home' %}" class="text-purple text-center">
      <i class="fas fa-home fa-lg"></i><br />Home
    </a>
    <a href="{% url 'home' %}" class="text-purple text-center">
      <i class="fas fa-envelope fa-lg"></i><br />Messages
    </a>
    <a href="{% url 'home' %}" class="text-purple text-center">
      <i class="fas fa-calendar fa-lg"></i><br />Events
    </a>
    <a href="{% url 'home' %}" class="text-purple text-center">
      <i class="fas fa-user fa-lg"></i><br />Profile
    </a>
  </nav>

  <script>
    document.getElementById('mobileMenuBtn').addEventListener('click', () => {
      document.querySelector('.sidebar').classList.toggle('show');
    });
</html>
